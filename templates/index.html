<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>El-Hady Clinic</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/style.css">
    <script>
        // منع اختيار يوم الجمعة
        function disableFridays() {
            const dateInput = document.getElementById('date');
            dateInput.addEventListener('input', function () {
                const selectedDate = new Date(this.value);
                if (selectedDate.getDay() === 5) {
                    alert("العيادة مغلقة يوم الجمعة، يرجى اختيار يوم آخر.");
                    this.value = '';
                }
            });
        }

        window.onload = disableFridays;
    </script>
</head>
<body>
    <div class="container">
        <h1>مركز الهادي للعلاج الطبيعي والتأهيل</h1>

        <!-- اختيار التاريخ أولاً -->
        <form method="GET" action="/">
            <label>اختر تاريخ الحجز</label>
            <input type="date" id="date" name="date" required min="2025-08-07" value="{{ request.args.get('date', '') }}">
            <button type="submit">عرض المواعيد المتاحة</button>
        </form>

        {% if available_times %}
        <!-- نموذج الحجز يظهر بعد اختيار التاريخ -->
        <form action="/submit" method="POST">
            <input type="hidden" name="date" value="{{ request.args.get('date') }}">
            <label>الاسم</label><input type="text" name="name" required>
            <label>العمر</label><input type="number" name="age" required>
            <label>رقم الهاتف</label><input type="tel" name="phone" required>
            <label>بماذا تشعر؟</label><input type="text" name="pain" required>
            <div class="checkbox-group">
                <label><input type="checkbox" name="conditions" value="Diabetes"> السكر</label>
                <label><input type="checkbox" name="conditions" value="High Blood Pressure"> الضغط</label>
                <label><input type="checkbox" name="conditions" value="Old Injury"> إصابة قديمة</label>
            </div>
            <label>اختر ميعاد الحجز</label>
            <select name="appointment" required>
                {% for time in available_times %}
                    <option value="{{ time }}">{{ time }}</option>
                {% endfor %}
            </select>
            <button type="submit">Book</button>
        </form>
        {% endif %}
    </div>
</body>
</html>
